/* ---------- Layout ---------- */
html, body {
  height: 100%;
  margin: 0;
}
#map {
  height: 100%;
  width: 100%;
}

/* ---------- Shared UI primitives ---------- */
:root {
  --ui-bg: #fff;
  --ui-border: #ddd;
  --ui-border-strong: #bbb;
  --ui-shadow: 0 1px 4px rgba(0,0,0,.25);
  --ui-radius: 8px;
  --ui-pad: 10px;
  --ui-gap: 8px;

  --pd-stroke: #ff6600;
  --pd-selected: #d40000;
  --zone-stroke: #2166f3;
  --zone-selected: #0b3aa5;

  --btn-bg: #fff;
  --btn-bg-ghost: #f7f7f7;
  --btn-border: #bbb;
  --btn-hover: #f0f0f0;
}

/* ---------- Control panel shell (PD, Zones, Routing) ---------- */
.pd-control,
.routing-control {
  background: var(--ui-bg);
  padding: var(--ui-pad);
  box-shadow: var(--ui-shadow);
  border-radius: var(--ui-radius);
  font: 14px/1.3 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

.pd-header,
.routing-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--ui-gap);
  margin-bottom: 6px;
}

.pd-actions,
.routing-actions {
  display: flex;
  align-items: center;
  gap: var(--ui-gap);
  flex-wrap: wrap;
}

.pd-control.collapsed .pd-list {
  display: none;
}

/* ---------- Buttons & inputs ---------- */
.pd-control button,
.routing-control button {
  appearance: none;
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  border-radius: 10px;
  padding: 6px 10px;
  cursor: pointer;
  font: inherit;
}
.pd-control button:hover,
.routing-control button:hover {
  background: var(--btn-hover);
}
.pd-control button.active,
.routing-control button.active {
  border-color: #888;
  box-shadow: inset 0 0 0 1px #888;
}
button.ghost {
  background: var(--btn-bg-ghost);
}

.pd-control input[type="text"],
.routing-control input[type="text"] {
  width: 100%;
  padding: 7px 9px;
  border: 1px solid var(--ui-border);
  border-radius: 8px;
  font: inherit;
  box-sizing: border-box;
}

/* ---------- PD list ---------- */
.pd-list {
  display: grid;
  grid-template-columns: 1fr;
  gap: 4px;
  max-height: 300px;
  overflow: auto;
  padding: 2px;
  border-top: 1px dashed var(--ui-border);
  margin-top: 6px;
}

.pd-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 2px;
  border-radius: 4px;
}
.pd-item:hover {
  background: rgba(0,0,0,.03);
}

.pd-cbx {
  flex: 0 0 auto;
  margin: 0 2px 0 0;
  width: 14px;
  height: 14px;
}
.pd-name {
  cursor: pointer;
  flex: 1;
  user-select: none;
}
.pd-item.selected .pd-name {
  font-weight: 600;
}

/* ---------- PD selected label (center pin) ---------- */
.pd-label .leaflet-tooltip {
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid var(--ui-border);
  border-radius: 6px;
  box-shadow: var(--ui-shadow);
  color: #000;
  font-weight: 600;
  padding: 4px 8px;
}

/* ---------- Zones (chips, popup) ---------- */
.zone-label {
  /* container for the chip */
}
.zone-tag {
  display: inline-block;
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid var(--zone-stroke);
  background: #fff;
  font-weight: 600;
  font-size: 12px;
  line-height: 1.1;
  box-shadow: var(--ui-shadow);
  user-select: none;
}
.zone-popup .leaflet-popup-content {
  font: 14px/1.3 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* ---------- Zones control inline search ---------- */
.pz-inline-search {
  width: 120px;
  padding: 6px 8px;
  border: 1px solid var(--ui-border);
  border-radius: 6px;
  font: inherit;
}

/* ---------- Routing control (Trip Generator & Keys) ---------- */
.routing-control .routing-section + .routing-section {
  border-top: 1px dashed var(--ui-border);
  margin-top: 10px;
  padding-top: 10px;
}

.routing-row {
  display: flex;
  gap: var(--ui-gap);
  align-items: center;
  flex-wrap: wrap;
  margin-top: 8px;
}

.routing-hint {
  color: #666;
  font-size: 12.5px;
  margin-top: 4px;
  display: block;
}

/* Key manager sub-section */
.key-row {
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px;
}
#txt-ors-keys {
  font-family: ui-monospace, Menlo, Consolas, "Liberation Mono", monospace;
}

/* ---------- Leaflet default tweaks ---------- */
.leaflet-control {
  /* ensure our cards align nicely with the geocoder width */
}
.leaflet-popup-content {
  margin: 8px 10px;
}
.leaflet-popup-content-wrapper {
  border-radius: 10px;
}
.leaflet-control-geocoder {
  max-width: 320px;
}
